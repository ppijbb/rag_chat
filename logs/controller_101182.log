INFO 2025-01-21 15:09:09,927 controller 101182 -- Controller starting (version='2.40.0').
INFO 2025-01-21 15:09:09,932 controller 101182 -- Starting proxy on node 'ea1ec7aee2d8d8000d356d9b03ca393f475eabe9c2a3c67f41528a40' listening on '0.0.0.0:8504'.
INFO 2025-01-21 15:09:10,366 controller 101182 -- Deploying new version of Deployment(name='MedicalInquiryService', app='default') (initial target replicas: 1).
INFO 2025-01-21 15:09:10,368 controller 101182 -- Deploying new version of Deployment(name='APIIngress', app='default') (initial target replicas: 1).
INFO 2025-01-21 15:09:10,471 controller 101182 -- Adding 1 replica to Deployment(name='MedicalInquiryService', app='default').
INFO 2025-01-21 15:09:10,471 controller 101182 -- Starting Replica(id='czgmb3ra', deployment='MedicalInquiryService', app='default').
INFO 2025-01-21 15:09:10,472 controller 101182 -- Adding 1 replica to Deployment(name='APIIngress', app='default').
INFO 2025-01-21 15:09:10,472 controller 101182 -- Starting Replica(id='4hu0tfxu', deployment='APIIngress', app='default').
INFO 2025-01-21 15:09:13,720 controller 101182 -- Replica(id='czgmb3ra', deployment='MedicalInquiryService', app='default') started successfully on node 'ea1ec7aee2d8d8000d356d9b03ca393f475eabe9c2a3c67f41528a40' after 3.2s. Replica constructor, reconfigure method, and initial health check took 0.0s.
ERROR 2025-01-21 15:09:13,825 controller 101182 -- Exception in Replica(id='4hu0tfxu', deployment='APIIngress', app='default'), the replica will be stopped.
Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/deployment_state.py", line 696, in check_ready
    ) = ray.get(self._ready_obj_ref)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 2755, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 906, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(RuntimeError): [36mray::ServeReplica:default:APIIngress.initialize_and_get_metadata()[39m (pid=101183, ip=172.26.105.92, actor_id=4270345cf0df20f5d9416fb501000000, repr=<ray.serve._private.replica.ServeReplica:default:APIIngress object at 0x7f463f61daf0>)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 872, in initialize_and_get_metadata
    await self._replica_impl.initialize(deployment_config)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 616, in initialize
    raise RuntimeError(traceback.format_exc()) from None
RuntimeError: Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 598, in initialize
    self._user_callable_asgi_app = await asyncio.wrap_future(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 1137, in initialize_callable
    await self._callable._run_asgi_lifespan_startup()
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/http_util.py", line 486, in _run_asgi_lifespan_startup
    raise RuntimeError(
RuntimeError: ASGI lifespan startup failed. Check replica logs for details.
INFO 2025-01-21 15:09:13,827 controller 101182 -- Stopping Replica(id='4hu0tfxu', deployment='APIIngress', app='default') (currently ReplicaState.STARTING).
INFO 2025-01-21 15:09:13,830 controller 101182 -- Adding 1 replica to Deployment(name='APIIngress', app='default').
INFO 2025-01-21 15:09:13,830 controller 101182 -- Starting Replica(id='4umu0hew', deployment='APIIngress', app='default').
INFO 2025-01-21 15:09:13,940 controller 101182 -- Replica(id='4hu0tfxu', deployment='APIIngress', app='default') is stopped.
ERROR 2025-01-21 15:09:16,941 controller 101182 -- Exception in Replica(id='4umu0hew', deployment='APIIngress', app='default'), the replica will be stopped.
Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/deployment_state.py", line 696, in check_ready
    ) = ray.get(self._ready_obj_ref)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 2755, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 906, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(RuntimeError): [36mray::ServeReplica:default:APIIngress.initialize_and_get_metadata()[39m (pid=101188, ip=172.26.105.92, actor_id=ab4dad0f55c9c42bb99f503b01000000, repr=<ray.serve._private.replica.ServeReplica:default:APIIngress object at 0x7f63bd6793a0>)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 872, in initialize_and_get_metadata
    await self._replica_impl.initialize(deployment_config)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 616, in initialize
    raise RuntimeError(traceback.format_exc()) from None
RuntimeError: Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 598, in initialize
    self._user_callable_asgi_app = await asyncio.wrap_future(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 1137, in initialize_callable
    await self._callable._run_asgi_lifespan_startup()
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/http_util.py", line 486, in _run_asgi_lifespan_startup
    raise RuntimeError(
RuntimeError: ASGI lifespan startup failed. Check replica logs for details.
INFO 2025-01-21 15:09:16,941 controller 101182 -- Stopping Replica(id='4umu0hew', deployment='APIIngress', app='default') (currently ReplicaState.STARTING).
INFO 2025-01-21 15:09:16,942 controller 101182 -- Adding 1 replica to Deployment(name='APIIngress', app='default').
INFO 2025-01-21 15:09:16,942 controller 101182 -- Starting Replica(id='j3av7oex', deployment='APIIngress', app='default').
INFO 2025-01-21 15:09:17,052 controller 101182 -- Replica(id='4umu0hew', deployment='APIIngress', app='default') is stopped.
ERROR 2025-01-21 15:09:19,945 controller 101182 -- Exception in Replica(id='j3av7oex', deployment='APIIngress', app='default'), the replica will be stopped.
Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/deployment_state.py", line 696, in check_ready
    ) = ray.get(self._ready_obj_ref)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/auto_init_hook.py", line 21, in auto_init_wrapper
    return fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/client_mode_hook.py", line 103, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 2755, in get
    values, debugger_breakpoint = worker.get_objects(object_refs, timeout=timeout)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/_private/worker.py", line 906, in get_objects
    raise value.as_instanceof_cause()
ray.exceptions.RayTaskError(RuntimeError): [36mray::ServeReplica:default:APIIngress.initialize_and_get_metadata()[39m (pid=101187, ip=172.26.105.92, actor_id=dc2202c48bee24ce7c7db63301000000, repr=<ray.serve._private.replica.ServeReplica:default:APIIngress object at 0x7f82ec3a5580>)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 872, in initialize_and_get_metadata
    await self._replica_impl.initialize(deployment_config)
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 616, in initialize
    raise RuntimeError(traceback.format_exc()) from None
RuntimeError: Traceback (most recent call last):
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 598, in initialize
    self._user_callable_asgi_app = await asyncio.wrap_future(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/replica.py", line 1137, in initialize_callable
    await self._callable._run_asgi_lifespan_startup()
  File "/home/user/miniconda3/envs/mvp_server/lib/python3.12/site-packages/ray/serve/_private/http_util.py", line 486, in _run_asgi_lifespan_startup
    raise RuntimeError(
RuntimeError: ASGI lifespan startup failed. Check replica logs for details.
INFO 2025-01-21 15:09:19,945 controller 101182 -- Stopping Replica(id='j3av7oex', deployment='APIIngress', app='default') (currently ReplicaState.STARTING).
ERROR 2025-01-21 15:09:19,947 controller 101182 -- The deployments ['APIIngress'] are UNHEALTHY.
INFO 2025-01-21 15:09:20,051 controller 101182 -- Replica(id='j3av7oex', deployment='APIIngress', app='default') is stopped.
INFO 2025-01-21 15:09:20,155 controller 101182 -- Adding 1 replica to Deployment(name='APIIngress', app='default').
INFO 2025-01-21 15:09:20,155 controller 101182 -- Starting Replica(id='1dym8omw', deployment='APIIngress', app='default').
INFO 2025-01-21 15:09:20,468 controller 101182 -- Controller shutdown started.
INFO 2025-01-21 15:09:20,469 controller 101182 -- Deleting app 'default'.
INFO 2025-01-21 15:09:20,471 controller 101182 -- Deleting Deployment(name='MedicalInquiryService', app='default')
INFO 2025-01-21 15:09:20,471 controller 101182 -- Deleting Deployment(name='APIIngress', app='default')
INFO 2025-01-21 15:09:20,475 controller 101182 -- Removing 1 replica from Deployment(name='MedicalInquiryService', app='default').
INFO 2025-01-21 15:09:20,475 controller 101182 -- Removing 1 replica from Deployment(name='APIIngress', app='default').
INFO 2025-01-21 15:09:20,475 controller 101182 -- Stopping Replica(id='czgmb3ra', deployment='MedicalInquiryService', app='default') (currently ReplicaState.RUNNING).
INFO 2025-01-21 15:09:20,476 controller 101182 -- Stopping Replica(id='1dym8omw', deployment='APIIngress', app='default') (currently ReplicaState.STARTING).
INFO 2025-01-21 15:09:22,518 controller 101182 -- Replica(id='czgmb3ra', deployment='MedicalInquiryService', app='default') is stopped.
INFO 2025-01-21 15:09:23,054 controller 101182 -- Replica(id='1dym8omw', deployment='APIIngress', app='default') is stopped.
WARNING 2025-01-21 15:09:23,161 controller 101182 -- All resources have shut down, controller exiting.
